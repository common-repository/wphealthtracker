function wphealthtrackerDietD3One(a,l){var t=120,e=40,r=60,c=100,s=550-e-r,h=450-t-c,n=(d3.format("0"),d3.scaleBand().rangeRound([0,s])),i=d3.scaleLinear().range([h,0]),d=d3.axisBottom(n),o=d3.axisLeft(i).tickFormat(function(t){if(Math.floor(t)==t)return t});d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-1").style("bottom","20px");var p=d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-1").append("svg").attr("width",s+r+e).attr("height",h+t+c).style("opacity","0").append("g").attr("transform","translate("+r+","+t+")");d3.tsv("",function(t){return t.frequency=+t.frequency,t},function(t,r){r=a,console.log("mydata"),console.log(r),n.domain(r.map(function(t){return t.letter})),i.domain([0,d3.max(r,function(t){return t.frequency})]),p.append("g").attr("class","x axis wphealthtracker-d3chart-x-axis-food-items").attr("transform","translate(0,"+h+")").call(d),p.append("g").attr("class","y axis wphealthtracker-d3chart-y-axis-food-items").call(o).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Frequency"),p.selectAll(".wphealthtracker-d3chart-bar-fooditem").data(r).enter().append("rect").attr("class","wphealthtracker-d3chart-bar wphealthtracker-d3chart-bar-fooditem").attr("x",function(t){return n(t.letter)+2}).attr("width",n.bandwidth()-2).attr("y",function(t){return i(t.frequency)}).attr("height",function(t){return h-i(t.frequency)}).style("margin","2px").style("padding","2px").on("mouseover",function(t){d3.selectAll(".wphealthtracker-d3chart-bar-fooditem").style("fill","#F3BFCE"),d3.select(this).style("fill","rgba(222, 35, 90, 1)");var e=t.letter.split(";"),a='<img class="wphealthtracker-d3chart-iconimg-fooditems" src="'+wphealthtrackerPhpVariables.WPHEALTHTRACKER_ROOT_IMG_ICONS_URL+'groceries.svg" />'+e[0].charAt(0).toUpperCase()+e[0].slice(1);(e=""!==e[1]?"      ("+wphealthtrackerPhpVariables.commontrans35+": "+e[1]+")":"").charAt(0).toUpperCase(),e.slice(1),d3.select(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3chart-readout-fooditems").style("opacity","1").select("#wphealthtracker-d3chart-tooltip-fooditems-item").html(a),d3.select(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3chart-readout-fooditems").style("opacity","1").select("#wphealthtracker-d3chart-tooltip-fooditems-category").text(e);var r,c,l='<p id="wphealthtracker-d3chart-consumed1-fooditems">';l=1==t.frequency?l+wphealthtrackerPhpVariables.diettrans32+" "+t.frequency+" "+wphealthtrackerPhpVariables.commontrans44:l+wphealthtrackerPhpVariables.diettrans32+" "+t.frequency+" "+wphealthtrackerPhpVariables.commontrans43,l+="</p>";var s=t.calories.split(";");r='<p id="wphealthtracker-d3chart-consumed2-fooditems">'+wphealthtrackerPhpVariables.diettrans9+": "+s[0]+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans33+": "+s[1]+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans34+": "+s[2]+"</p>";var h=wphealthtrackerPhpVariables.commontrans45,n=wphealthtrackerPhpVariables.commontrans45,i=wphealthtrackerPhpVariables.commontrans45;""!=t.carbs&&(h=t.carbs),""!=t.protein&&(n=t.protein),""!=t.fats&&(i=t.fats),consumedText3='<p id="wphealthtracker-d3chart-consumed3-fooditems">'+wphealthtrackerPhpVariables.diettrans35+": "+h+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans12+": "+n+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans36+": "+i+"</p>";var d=wphealthtrackerPhpVariables.commontrans45,o=wphealthtrackerPhpVariables.commontrans45,p=wphealthtrackerPhpVariables.commontrans45;""!=t.satfats&&(d=t.satfats),""!=t.monosatfats&&(o=t.monosatfats),""!=t.polysatfats&&(p=t.polysatfats),consumedText4='<p id="wphealthtracker-d3chart-consumed3-fooditems">'+wphealthtrackerPhpVariables.diettrans5+": "+d+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans37+": "+o+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans38+": "+p+"</p>";var u=wphealthtrackerPhpVariables.commontrans45,w=wphealthtrackerPhpVariables.commontrans45;""!=t.sugars&&(u=t.sugars),""!=t.fiber&&(w=t.fiber),consumedText5='<p id="wphealthtracker-d3chart-consumed3-fooditems">'+wphealthtrackerPhpVariables.diettrans39+": "+u+"&nbsp;&nbsp;&nbsp;&nbsp;"+wphealthtrackerPhpVariables.diettrans40+": "+w+"</p>",c=l+r+consumedText3+consumedText4+consumedText5,d3.select(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3chart-readout-fooditems").select("#wphealthtracker-d3chart-tooltip-fooditems-number").html(c)}).on("mouseout",function(){d3.selectAll(".wphealthtracker-d3chart-bar-fooditem").style("fill","rgba(222, 35, 90, 1)")}),d3.select(".wphealthtracker-stats-actual-diet-top-div input").on("change",e);var c=setTimeout(function(){l("#wphealthtracker-stats-actual-inner-d3-1-1 svg").animate({opacity:"1"},2e3),l("#wphealthtracker-spinner-d3-await-1").animate({opacity:"0"}),l("#wphealthtracker-chart-hover-message-fooditem").html("<p>"+wphealthtrackerPhpVariables.d3trans54+"</p>"),d3.select(".wphealthtracker-stats-actual-diet-top-div input").property("checked",!0).each(e)},2e3);function e(){clearTimeout(c);var a=n.domain(r.sort(this.checked?function(t,e){return e.frequency-t.frequency}:function(t,e){return d3.ascending(t.letter,e.letter)}).map(function(t){return t.letter})).copy();p.selectAll(".wphealthtracker-d3chart-bar-fooditem").sort(function(t,e){return a(t.letter)-a(e.letter)});var t=p.transition().duration(750),e=function(t,e){return 50*e};t.selectAll(".wphealthtracker-d3chart-bar-fooditem").delay(e).attr("x",function(t){return a(t.letter)}),t.select(".x.axis").call(d).selectAll("g").delay(e)}})}function wphealthtrackerDietD3Two(d,o){var t=120,e=40,a=60,r=100,p=550-e-a,u=450-t-r,w=d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-2").append("svg").attr("class","wphealthtracker-d3chart-topsvg").attr("id","wphealthtracker-d3chart-topsvg-energy").attr("width",p+a+e).attr("height",u+t+r).append("g").attr("transform","translate("+a+","+t+")");w.append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",0-u/2).attr("class","wphealthtracker-d3chart-axislabel").attr("id","wphealthtracker-d3chart-axislabel-energy").style("text-anchor","middle").text(wphealthtrackerPhpVariables.d3trans69);var k=d3.scaleLinear().range([0,p]),y=d3.scaleLinear().range([u,0]),g=d3.scaleOrdinal(d3.schemeCategory10),v=(d3.axisBottom(k),d3.axisLeft(y).tickSize(-p)),m=d3.timeParse("%Y-%m-%d"),f=(d3.timeFormat("%Y-%m-%d"),d3.bisector(function(t){return t.date}).left,d3.line().curve(d3.curveLinear).x(function(t){return k(t.date)}).y(function(t){return y(t.close)}));d3.csv("",function(t,e){console.log("my data"),console.log(d);var a=d;a.forEach(function(t){t.date=m(t.date),Kilojoules=+t.Kilojoules,Calories=+t.Calories}),a.sort(function(t,e){return t.date-e.date}),g.domain(d3.keys(a[0]).filter(function(t){return"date"!==t}));var r=g.domain().map(function(e){return{name:e,values:a.map(function(t){return{date:t.date,close:t[e]}})}});k.domain([d3.min(r,function(t){return d3.min(t.values,function(t){return t.date})}),d3.max(r,function(t){return d3.max(t.values,function(t){return t.date})})]),y.domain([d3.min(r,function(t){return d3.min(t.values,function(t){return 0})}),d3.max(r,function(t){return d3.max(t.values,function(t){return t.close+.05*t.close})})]),w.append("g").attr("class","wphealthtracker-d3chart-yaxis-tick-holder").attr("id","wphealthtracker-d3chart-yaxis-tick-holder-energy").attr("class","y axis").call(v),w.append("rect").attr("class","wphealthtracker-mousemove-rect-energy").attr("id","wphealthtracker-mousemove-rect-energy").attr("width",p).attr("height",u).attr("transform","translate(0,"+u+")").style("fill","none").style("pointer-events","all").on("mouseout",function(){d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-circle0-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-circle1-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-circle2-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-circle3-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text0-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text1-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text2-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text3-energy").style("opacity","0"),d3.select(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3chart-mouse-line-energy").style("opacity","0"),d3.selectAll(".wphealthtracker-d3chart-legendtextval-energy").text(""),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-xaxislabel-top-energy").text("")}).on("mousemove",function(){o("#wphealthtracker-chart-hover-message-energy").animate({opacity:0},{duration:500,complete:function(){o(this).css({"pointer-events":"none","z-index":-99999})}});var h=d3.mouse(this);d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-mouse-line-energy").attr("d",function(){var t="M"+h[0]+","+u;return t+=" "+h[0]+",0"}),d3.selectAll(".wphealthtracker-d3chart-mouse-per-line-energy").attr("transform",function(t,e){if(d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text0-energy").style("opacity","1"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text1-energy").style("opacity","1"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text2-energy").style("opacity","1"),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-text3-energy").style("opacity","1"),d3.select(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3chart-mouse-line-energy").style("opacity","1"),e<n.length){for(var a=k.invert(h[0]),r=(d3.bisector(function(t){return t.date}).right,0),c=n[e].getTotalLength(),l=null;l=Math.floor((r+c)/2),pos=n[e].getPointAtLength(l),l!==c&&l!==r||pos.x===h[0];)if(pos.x>h[0])c=l;else{if(!(pos.x<h[0]))break;r=l}a=i(a=new Date(a)),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-xaxislabel-top-energy").style("opacity",1).text(a),d3.select(this).select("circle").style("opacity","1");var s=y.invert(pos.y).toFixed(2);return d3.select(this).select("text").text(s),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legendtextval-energy-"+e).text(s),"translate("+h[0]+","+pos.y+")"}})});var n=w.selectAll(".wphealthtracker-energy-lines-actual").data(r).enter().append("g").attr("class","wphealthtracker-energy-lines-actual");n.append("path").attr("id",function(t,e){return"wphealthtracker-d3chart-linepath-energy-"+e}).attr("class",function(t,e){return"wphealthtracker-d3chart-line wphealthtracker-d3chart-line-energy wphealthtracker-d3chart-legendrect-energy-"+e}).attr("d",function(t){return f(t.values)}).style("stroke",function(t){return g(t.name)}).on("mouseover",function(t,e){d3.select(this).style("stroke-width",3);for(var a=d3.mouse(this),r=k.invert(a[0]),c=(d3.bisector(function(t){return t.date}).right,0),l=n[e].getTotalLength(),s=null;s=Math.floor((c+l)/2),pos=n[e].getPointAtLength(s),s!==l&&s!==c||pos.x===a[0];)if(pos.x>a[0])l=s;else{if(!(pos.x<a[0]))break;c=s}var h=y.invert(pos.y).toFixed(2);for(r=(r=i(r=new Date(r)))+" - "+h,d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-xaxislabel-top-energy").style("opacity",1).text(r),j=0;j<2;j++)e!==j?(d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-linepath-energy-"+j).style("opacity",.1),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legendrect-energy-"+j).style("opacity",.1),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legendtextval-energy-"+j).text("")):d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legendtextval-energy-"+j).text(h)}).on("mouseout",function(t,e){for(d3.select(this).style("stroke-width",2),j=0;j<2;j++)d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-linepath-energy-"+j).style("opacity",1),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legendrect-energy-"+j).style("opacity",1);d3.selectAll(".wphealthtracker-d3chart-legendtextval-energy").text(""),d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-xaxislabel-top-energy").text("")});var c=w.append("g").attr("class","mouse-over-effects-energy");c.append("path").attr("class","wphealthtracker-d3chart-mouse-line-energy").attr("id","wphealthtracker-d3chart-mouse-line-energy").style("stroke","black").style("stroke-width","1px").style("opacity","0"),n=document.getElementsByClassName("wphealthtracker-d3chart-line-energy");var l=c.append("g").attr("class","wphealthtracker-d3chart-mouse-per-line-energy");l.append("text").attr("id","wphealthtracker-text0-energy").attr("transform","translate(10,3)"),l.append("circle").attr("class","wphealthtracker-d3chart-travelling-circle-energy").attr("id","wphealthtracker-circle0-energy").attr("r",7).style("fill","none").style("stroke-width","1px").style("opacity","0").style("stroke","rgb(31, 119, 180)");var s=c.append("g").attr("class","wphealthtracker-d3chart-mouse-per-line-energy");s.append("text").attr("id","wphealthtracker-text1-energy").attr("transform","translate(10,3)"),s.append("circle").attr("class","wphealthtracker-d3chart-travelling-circle-energy").attr("id","wphealthtracker-circle1-energy").attr("r",7).style("fill","none").style("stroke-width","1px").style("opacity","0").style("stroke","rgb(255, 127, 14)");var h=d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3chart-legend-energy");function i(t){var e=function(t){var e,a=t.split(":");e=12==+a[0]?a[0]+":"+a[1]+" PM":"00"==+a[0]?"12:"+a[1]+" AM":12<+a[0]?+a[0]-12+":"+a[1]+" PM":+a[0]+":"+a[1]+" AM";return e}((t=String(t).split(" "))[4]);return t[0]+" "+t[1]+" "+t[2]+" "+t[3]+" "+e}h.append("text").attr("class","wphealthtracker-d3chart-legend wphealthtracker-d3chart-legend-energy").attr("x",80).attr("y",20).text(wphealthtrackerPhpVariables.diettrans34),h.append("text").attr("class","wphealthtracker-d3chart-legend wphealthtracker-d3chart-legend-energy").attr("x",80).attr("y",43).text(wphealthtrackerPhpVariables.diettrans8),h.append("rect").attr("class","wphealthtracker-d3chart-legendrect-energy wphealthtracker-d3chart-legendrect-energy-0").attr("id","wphealthtracker-d3chart-legendrect-energy-0").attr("x",50).attr("y",7.5).attr("fill","rgb(31, 119, 180)").on("mouseover",function(t,e){for(j=0;j<5;j++)d3.selectAll(".wphealthtracker-d3chart-legendrect-energy-"+j).style("opacity",0);var a=d3.select(this).attr("class").split(" ");d3.selectAll("."+a[1]).style("opacity",1)}).on("mouseout",function(t,e){d3.selectAll(".wphealthtracker-d3chart-line-energy, .wphealthtracker-d3chart-legendrect-energy").style("opacity",1)}).style("width","15").style("height","15"),h.append("rect").attr("class","wphealthtracker-d3chart-legendrect-energy wphealthtracker-d3chart-legendrect-energy-1").attr("id","wphealthtracker-d3chart-legendrect-energy-2").attr("x",50).attr("y",32.5).attr("fill","rgb(255, 127, 14)").on("mouseover",function(t,e){for(j=0;j<5;j++)d3.selectAll(".wphealthtracker-d3chart-legendrect-energy-"+j).style("opacity",0);var a=d3.select(this).attr("class").split(" ");d3.selectAll("."+a[1]).style("opacity",1)}).on("mouseout",function(t,e){d3.selectAll(".wphealthtracker-d3chart-line-energy, .wphealthtracker-d3chart-legendrect-energy").style("opacity",1)}).style("width","15").style("height","15"),h.append("text").attr("class","wphealthtracker-d3chart-legendtextval wphealthtracker-d3chart-legendtextval-energy").attr("id","wphealthtracker-d3chart-legendtextval-energy-0").attr("x",0).attr("y",20),h.append("text").attr("class","wphealthtracker-d3chart-legendtextval wphealthtracker-d3chart-legendtextval-energy").attr("id","wphealthtracker-d3chart-legendtextval-energy-1").attr("x",0).attr("y",45),w.append("text").attr("class","wphealthtracker-d3chart-xaxislabel-top").attr("id","wphealthtracker-d3chart-xaxislabel-top-energy").attr("transform","translate("+p/2+" ,"+-15+")").style("text-anchor","middle").style("opacity",0).text(""),o("#wphealthtracker-spinner-d3-await-2").animate({opacity:"0"}),o("#wphealthtracker-chart-hover-message-energy").html("<p>"+wphealthtrackerPhpVariables.d3trans20+"</p>")})}function wphealthtrackerDietD3Three(t,u){var e=t,a=new function(){var l,s,h=d3.select(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-3"),n=d3.scaleOrdinal(d3.schemeCategory10),i=function(t){var e=d3.sum(t.selectAll(".clicked").data(),function(t){return t.data.val});t.select(".value").text(function(t){return e?e.toFixed(1)+" "+t.unit:t.total.toFixed(1)+" "+t.unit}),t.select(".value2").text(""),t.select(".percentage").text(function(t){return e?(e/t.total*100).toFixed(2)+"%":""})},d=function(){h.selectAll(".value").text(function(t){return t.total.toFixed(1)+" "+t.unit}),h.selectAll(".percentage").text("")},o=function(t,e){switch(e){case 0:t.transition().duration(500).ease(d3.easeBounce).attr("d",d3.arc().innerRadius(.7*s).outerRadius(s));break;case 1:t.transition().attr("d",d3.arc().innerRadius(.7*s).outerRadius(1.08*s))}},p=function(){console.log("updateDonut!");var a=d3.pie().sort(null).value(function(t){return t.val}),t=d3.arc().innerRadius(.7*s).outerRadius(function(){return d3.select(this).classed("clicked")?1.08*s:s}),e=h.selectAll(".donut").selectAll("path").data(function(t,e){return a(t.data)});e.transition().duration(1e3).attr("d",t),e.enter().append("svg:path").attr("d",t).attr("class",function(t,e){return"path"+e}).style("fill",function(t,e){return n(e)}).style("stroke","#FFFFFF").on("mouseover",function(e,t,a){o(d3.select(this),1);var r=d3.select(this.parentNode);r.select(".value").text(function(t){return e.data.val.toFixed(1)+" "+t.unit}),r.select(".value2").text(function(t){return e.data.cat}),r.select(".percentage").text(function(t){return(e.data.val/t.total*100).toFixed(2)+"%"})}).on("mouseout",function(t,e,a){var r=d3.select(this);r.classed("clicked")||o(r,0);var c=d3.select(this.parentNode);i(c)}).on("click",function(t,e,a){var r=d3.select(this.parentNode);0===r.selectAll(".clicked").length&&r.select("circle").on("click")();var c=d3.select(this),l=c.classed("clicked");o(c,~~!l),c.classed("clicked",!l),i(r)}),e.exit().remove(),d()};this.create=function(t){var e=u("#wphealthtracker-stats-actual-inner-d3-1-3");l=e.innerWidth()/t.length/2*.14,s=e.innerWidth()/t.length/2*.85,h.append("svg").attr("class","legend").attr("width","100%").attr("height",100).attr("transform","translate(0, 20)");var a,r,c;h.selectAll(".donut").data(t).enter().append("svg:svg").attr("width",2*(s+l)).attr("height",2*(s+l)).style("padding-top","20px").append("svg:g").attr("class",function(t,e){return"donut type"+e}).attr("transform","translate("+(s+l)+","+(s+l)+")");a=function(t){for(var e=new Array,a=0;a<t[0].data.length;a++)e.push(t[0].data[a].cat);return e}(t),(r=h.select(".legend").selectAll("g").data(a).enter().append("g").attr("transform",function(t,e){return"translate(50, "+(20*e+20)+")"})).append("circle").attr("class","legend-icon").attr("r",6).style("fill",function(t,e){return n(e)}).on("mouseover",function(t,e){d3.selectAll(".path"+e).transition().duration(500).ease(d3.easeBounce).attr("d",d3.arc().innerRadius(.7*s).outerRadius(1.08*s))}).on("mouseout",function(t,e){d3.selectAll(".path"+e).transition().duration(500).ease(d3.easeBounce).attr("d",d3.arc().innerRadius(.7*s).outerRadius(s))}),r.append("text").attr("dx","1em").attr("dy",".3em").text(function(t){return t}),(c=d3.selectAll(".donut")).append("svg:circle").attr("r",.6*s).style("fill","#E7E7E7").on("mouseover",function(t,e){console.log("mouseover1!"),d3.select(this).transition().attr("r",.65*s)}).on("mouseout",function(t,e){console.log("mouseout1!"),d3.select(this).transition().duration(500).ease(d3.easeBounce).attr("r",.6*s)}).on("click",function(t,e){var a=h.selectAll(".clicked");o(a,0),a.classed("clicked",!1),d()}),c.append("text").attr("class","center-txt type").attr("y",-1.13*s).attr("text-anchor","middle").style("font-weight","bold").text(function(t,e){return t.type}),c.append("text").attr("class","center-txt value").attr("text-anchor","middle"),c.append("text").attr("class","center-txt value2").attr("y",.16*s).attr("text-anchor","middle"),c.append("text").attr("class","center-txt percentage").attr("y",.36*s).attr("text-anchor","middle").style("fill","#A2A2A2"),p()},this.update=function(t){h.selectAll(".donut").data(t);p()}};function r(){console.log(d3ThreeTwo[0]);for(var t=d3ThreeTwo[0].type,e=d3ThreeTwo[0].unit,a=[],r=d3ThreeTwo[0].data.length-1;0<=r;r--)a.push(d3ThreeTwo[0].data[r].cat);var c=[];for(r=d3ThreeTwo[0].data.length-1;0<=r;r--)c.push(d3ThreeTwo[0].data[r].val);var l=a,s=c,h=new Array;for(r=0;r<t.length;r++){for(var n=new Array,i=0,d=0;d<l.length;d++)i+=s[d],n.push({cat:l[d],val:s[d]});h.push({type:t[r],unit:e[r],data:n,total:i})}return console.log("This is the Dataset"),console.log(h),h}a.create(e),u("#wphealthtracker-chart-hover-message-macro").css({bottom:"0px"}),u("#refresh-btn").on("click",function(){a.update(r)}),u("#wphealthtracker-spinner-d3-await-3").animate({opacity:"0"}),u("#wphealthtracker-chart-hover-message-macro").html("<p>"+wphealthtrackerPhpVariables.d3trans72+"</p>")}console.log("This is the JavaScript Object that holds all PHP Variables for use in the wphealthtracker-jre-frontend-dietstats.js file"),console.log(wphealthtrackerPhpVariables),jQuery(document).ready(function(g){"use strict";var t,e;t=wphealthtrackerPhpVariables.WPHEALTHTRACKER_CURRENT_USER_ID,e={action:"wphealthtracker_jre_grab_user_data_for_diet_d3_action",security:wphealthtrackerPhpVariables.statsdietnonce2,wpuserid:t},g(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-stats-actual-top-div, .wphealthtracker-stats-actual-diet-top-div .wphealthtracker-stats-actual-top-div-d3").animate({height:"0px",opacity:0},{duration:1e3,complete:function(){g(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-d3-chart-title-div").empty(),g(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-stats-actual-top-div-inner-right").empty(),g(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-stats-actual-top-div-inner-left").empty(),g(".wphealthtracker-stats-actual-diet-top-div .wphealthtracker-spinner-primary-d3-await").css({opacity:"1"})}}),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-spinner-1").animate({opacity:"1"}),console.log("Here's the data we're about to send to wphealthtracker-stats-diet-ajax.php to then get all the user's data, make a call to the WPHealthTracker_D3_Diet class in class-d3-diet.php, and then return one array of all formatted data needed for D3, plus the title html for each chart."),console.log(e),g.ajax({url:ajaxurl,type:"POST",data:e,timeout:0,success:function(t){var t=JSON.parse(t),e=t[0],a=t[1],r=t[2],c=t[3][0],l=t[3][1],s=t[3][2],h=t[4][0],n=t[4][1],i=t[4][2],d=[],o=[],p="",u="",w="",k=0,y=0;console.log("Here is the data we received back from wphealthtracker-stats-diet-ajax.php - Response[0] should be the D3-Formatted data for the Food Chart, Response[1] should be the D3-Formatted data for the Calories/Energy Chart, Response[2] should be the D3-Formatted data for the Macronutrients Chart, Response[3] should be the Title HTML for each respective chart, Response[3] should be the Title HTML for each respective chart.and Response[4] should be the Stats HTML for each respective chart."),console.log(t),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-1").append(c),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-2").append(l),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-3").append(s),-1!==e.indexOf("wphealthtracker-no-saved-data-div")?(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-spinner-d3-await-1").animate({opacity:"0"}),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-1").css({bottom:"-18px"}),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-1").append(e)):(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-1").append('<label id="wphealthtracker-d3chart-sort-fooditems"><input type="checkbox"> Sort values</label><div class="wphealthtracker-d3chart-readout-fooditems"><p><span id="wphealthtracker-d3chart-tooltip-fooditems-item"></span><span id="wphealthtracker-d3chart-tooltip-fooditems-category"></span></p><div id="wphealthtracker-d3chart-tooltip-fooditems-number"></div></div><div class="wphealthtracker-chart-hover-message" id="wphealthtracker-chart-hover-message-fooditem">'+wphealthtrackerPhpVariables.d3trans48+"</div>"),wphealthtrackerDietD3One(e,g)),-1!==a.indexOf("wphealthtracker-no-saved-data-div")?(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-spinner-d3-await-2").animate({opacity:"0"}),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-2").append(a),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-inner-d3-2 #wphealthtracker-stats-actual-inner-d3-2-2").css({top:"0px"})):(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-2").append('<div id="wphealthtracker-energy-chart-select-div"></div><div id="wphealthtracker-d3chart-legendContainer-energy" class="wphealthtracker-d3chart-legendContainer"><svg id="wphealthtracker-d3chart-legend-energy"></svg></div><div class="wphealthtracker-chart-hover-message" id="wphealthtracker-chart-hover-message-energy">'+wphealthtrackerPhpVariables.d3trans48+"</div>"),wphealthtrackerDietD3Two(a,g)),-1!==r.indexOf("wphealthtracker-no-saved-data-div")?(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-spinner-d3-await-3").animate({opacity:"0"}),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-3").append(r)):(g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-1-3").append('<div id="wphealthtracker-d3chart-legendContainer-macro" class="wphealthtracker-d3chart-legendContainer"></div><div class="wphealthtracker-chart-hover-message" id="wphealthtracker-chart-hover-message-macro">'+wphealthtrackerPhpVariables.d3trans48+"</div>"),d.push(r[0]),o.push(r[1]),wphealthtrackerDietD3Three(r,g)),p=g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-inner-d3-1"),k=p.height(),y=p.css("height","auto").height(),p.height(k),p.stop().animate({height:y,opacity:1},{duration:1e3,complete:function(){g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-2-1").append(h),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-1").animate({opacity:1},2e3),p.css({height:"auto"})}}),u=g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-inner-d3-2"),k=u.height(),y=u.css("height","auto").height(),u.height(k),u.stop().animate({height:y,opacity:1},{duration:1e3,complete:function(){g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-2-2").append(n),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-2").animate({opacity:1},2e3),u.css({height:"auto"})}}),w=g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-inner-d3-3"),k=w.height(),y=w.css("height","auto").height(),w.height(k),w.stop().animate({height:y,opacity:1},{duration:1e3,complete:function(){g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-stats-actual-inner-d3-2-3").append(i),g(".wphealthtracker-stats-actual-diet-top-div #wphealthtracker-d3-chart-title-div-1-3").animate({opacity:1},2e3),w.css({height:"auto"})}})},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}})});